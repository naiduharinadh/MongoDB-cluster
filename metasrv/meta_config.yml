version: '3.8'

services:

  metaSrv1:
    container_name: "metaSRV1"
    image: "mongo:latest"
    deploy:
      replicas: 1
    command: mongod --configsvr --replSet cfgrs --port 27017 --dbpath /data/db
    ports:
      - "40001:27017"
    networks:
      - "my_overlay1"

  metaSrv2:
    container_name: "metaSRV2"
    image: "mongo:latest"
    deploy:
      replicas: 1
    command: mongod --configsvr --replSet cfgrs --port 27017 --dbpath /data/db
    ports:
      - "40002:27017"
    networks:
      - "my_overlay1"

  metaSrv3:
    container_name: "metaSRV3"
    image: "mongo:latest"
    deploy:
      replicas: 1
    command: mongod --configsvr --replSet cfgrs --port 27017 --dbpath /data/db
    ports:
      - "40003:27017"
    networks:
      - "my_overlay1"

networks:
  my_overlay1:
    driver: overlay
